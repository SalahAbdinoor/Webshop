<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Noor Shop</title>
    <link rel="stylesheet" href="bootstrap.css" />
  </head>
  <body>
    <div class="nav">
      <nav class="navbar bg-dark fixed-top" style="opacity: 80%">
        <div class="container">
          <a class="navbar-brand" href="index.html">
            <img src="images/logo.png" alt="logo" width="150" height="80" />
          </a>
        </div>
      </nav>
    </div>
    <div
      style="
        margin-bottom: 10rem;
        margin-top: 10rem;
        margin-left: 14rem;
        margin-right: 14rem;
        justify-self: center;
        border-color: rgb(219, 137, 30);
      "
      class="container"
    >
      <div
        class="row"
        id="cardId"
        style="border-color: rgb(219, 137, 30)"
      ></div>
    </div>
    <footer class="py-2 bg-secondary fixed-bottom">
      <p class="m-0 text-center text-white">
        Copyright &copy; Noor Shop - 2021
      </p>
    </footer>

    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>

    <script>
      fetch("https://webacademy.se/fakestore/")
        .then((response) => response.json())
        .then((data) => cardGen(data));

      const cardGen = (response) => {
        for (let index = 0; index < response.length; index++) {
          document.getElementById("cardId").innerHTML += `
          
          
          <div class="card col-lg-3 col-md-4"  >
            <img style="margin-top: 1rem;" class="card-img-top" src="${response[index].image}"  alt="product image" />
            <div class="card-body">
              <div>
                <h4
                class="card-title"
                style="text-align: center; color: rgb(134, 24, 24)"
                >${response[index].title}</h4>
                </div>
                
                <div class="d-flex justify-content-between">
                  <h5 class="price">$${response[index].price}</h5>
                  <a href="shoppingcart.html"><button class="btn btn-secondary"; value="${response[index].id}" style="align-content: right">
                    KÃ¶p
                    </button>
                  </a>
                    </div>
                    
                    
                    <hr />
                    <p class="description" style="margin-bottom: 0">${response[index].description}</p>
                    
                    </div>
                    
                    </div>`;
        }

        const idList = new Array();
        const titleList = new Array();
        const priceList = new Array();
        const imageList = new Array();
        const descriptionList = new Array();

        response.forEach((element) => {
          idList.push(element.id);
          titleList.push(element.title);
          priceList.push(element.price);
          imageList.push(element.image);
          descriptionList.push(element.description);
        });

        $(document).ready(function () {
          $("button").click(function () {
            response.forEach((element) => {
              let send = new Array();

              if (this.value == element.id) {
                send.push(
                  idList[element.id - 1],
                  titleList[element.id - 1],

                  priceList[element.id - 1],

                  imageList[element.id - 1],

                  descriptionList[element.id - 1]
                );

                localStorage.setItem("product", send);
              }
            });
          });
        });
      };
    </script>
  </body>
</html>
